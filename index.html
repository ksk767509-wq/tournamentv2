<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Adept Play</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        
        // Your web app's Firebase configuration (from firebase-config.js)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        
        // Make auth and db globally accessible as modules (or pass them around)
        // For this project, we'll export them from a dedicated config file.
    </script>
    
    <style>
        /* Simple loading spinner */
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Simple toast notification */
        #toast-notification {
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            transform: translateY(100%);
            opacity: 0;
        }
        #toast-notification.show {
            transform: translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans antialiased">

    <div id="app" class="relative min-h-screen w-full max-w-lg mx-auto bg-gray-900 overflow-hidden shadow-2xl">

        <div id="global-loader" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
            <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div>
        </div>

        <div id="toast-notification" class="fixed bottom-20 left-1/2 -translate-x-1/2 w-11/12 max-w-md p-4 rounded-lg shadow-lg z-50">
            <p id="toast-message"></p>
        </div>

        <section id="auth-section" class="min-h-screen flex flex-col items-center justify-center p-6">
            <div class="w-full">
                <div class="text-center mb-12">
                    <i class="fas fa-gamepad text-5xl text-indigo-400"></i>
                    <h1 class="text-4xl font-bold text-white mt-4">Adept Play</h1>
                    <p class="text-gray-400">Join the Competition</p>
                </div>

                <div id="auth-forms-container" class="bg-gray-800 p-6 rounded-lg shadow-lg">
                    <form id="login-form">
                        <h2 class="text-2xl font-semibold text-center mb-6">Login</h2>
                        <div class="mb-4">
                            <label for="login-email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                            <input type="email" id="login-email" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="you@example.com">
                        </div>
                        <div class="mb-6">
                            <label for="login-password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                            <input type="password" id="login-password" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="••••••••">
                        </div>
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                            Login
                        </button>
                        <p class="text-center text-sm text-gray-400 mt-6">
                            Don't have an account? 
                            <a href="#" id="show-signup" class="font-medium text-indigo-400 hover:text-indigo-300">Sign Up</a>
                        </p>
                    </form>

                    <form id="signup-form" class="hidden">
                        <h2 class="text-2xl font-semibold text-center mb-6">Create Account</h2>
                        <div class="mb-4">
                            <label for="signup-username" class="block text-sm font-medium text-gray-300 mb-1">Username</label>
                            <input type="text" id="signup-username" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="YourGamerTag">
                        </div>
                        <div class="mb-4">
                            <label for="signup-email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                            <input type="email" id="signup-email" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="you@example.com">
                        </div>
                        <div class="mb-6">
                            <label for="signup-password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                            <input type="password" id="signup-password" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="Min. 6 characters">
                        </div>
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                            Create Account
                        </button>
                        <p class="text-center text-sm text-gray-400 mt-6">
                            Already have an account? 
                            <a href="#" id="show-login" class="font-medium text-indigo-400 hover:text-indigo-300">Login</a>
                        </p>
                    </form>
                </div>
            </div>
        </section>

        <div id="main-app-content" class="hidden">
            <header id="app-header" class="fixed top-0 left-0 right-0 w-full max-w-lg mx-auto bg-gray-800 shadow-md z-40">
                <div class="flex items-center justify-between h-16 px-4">
                    <div class="flex items-center">
                        <i class="fas fa-gamepad text-2xl text-indigo-400"></i>
                        <span class="text-xl font-bold text-white ml-2">Adept Play</span>
                    </div>
                    <div id="wallet-balance-header" class="bg-gray-700 rounded-full px-4 py-1.5">
                        <span class="font-semibold text-green-400">
                            <i class="fas fa-wallet text-sm mr-1"></i>
                            <span id="header-wallet-amount">₹0.00</span>
                        </span>
                    </div>
                </div>
            </header>

            <main id="app-main" class="pt-16 pb-20">

                <section id="home-section" class="app-view p-4">
                    <h2 class="text-2xl font-bold text-white mb-4">Upcoming Tournaments</h2>
                    <div id="tournaments-list" class="space-y-4">
                        <p class="text-gray-400">Loading tournaments...</p>
                    </div>
                </section>

                <section id="my-tournaments-section" class="app-view p-4 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">My Tournaments</h2>
                    <div class="mb-4 border-b border-gray-700">
                        <nav id="my-tournaments-tabs" class="flex -mb-px" aria-label="Tabs">
                            <button class="tab-btn active text-indigo-400 border-indigo-400 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-tab="live">
                                Upcoming & Live
                            </button>
                            <button class="tab-btn text-gray-400 border-transparent hover:text-gray-300 hover:border-gray-500 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ml-8" data-tab="completed">
                                Completed
                            </button>
                        </nav>
                    </div>
                    <div id="my-tournaments-content">
                        <div id="tab-content-live" class="tab-content space-y-4">
                            <p class="text-gray-400">Loading your tournaments...</p>
                        </div>
                        <div id="tab-content-completed" class="tab-content space-y-4 hidden">
                            <p class="text-gray-400">No completed tournaments found.</p>
                        </div>
                    </div>
                </section>

                <section id="wallet-section" class="app-view p-4 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">My Wallet</h2>
                    <div class="bg-gray-800 p-6 rounded-lg text-center shadow-lg">
                        <p class="text-gray-400 text-sm">Current Balance</p>
                        <p id="wallet-page-balance" class="text-4xl font-bold text-green-400 my-2">₹0.00</p>
                    </div>
                    <div class="flex gap-4 my-6">
                        <button id="add-money-btn" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg">
                            <i class="fas fa-plus-circle mr-2"></i>Add ₹100
                        </button>
                        <button id="withdraw-money-btn" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg">
                            <i class="fas fa-minus-circle mr-2"></i>Withdraw ₹50
                        </button>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Transaction History</h3>
                    <div id="transaction-history" class="space-y-2">
                        <p class="text-gray-400">Loading transactions...</p>
                    </div>
                </section>

                <section id="profile-section" class="app-view p-4 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Profile</h2>
                    <form id="profile-update-form" class="bg-gray-800 p-6 rounded-lg space-y-4">
                        <div>
                            <label for="profile-username" class="block text-sm font-medium text-gray-300 mb-1">Username</label>
                            <input type="text" id="profile-username" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white" placeholder="YourGamerTag">
                        </div>
                        <div>
                            <label for="profile-email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                            <input type="email" id="profile-email" readonly class="w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-gray-400" placeholder="you@example.com">
                        </div>
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg">
                            Update Profile
                        </button>
                    </form>
                    
                    <h3 class="text-xl font-semibold text-white mt-8 mb-4">Security</h3>
                    <form id="password-change-form" class="bg-gray-800 p-6 rounded-lg space-y-4">
                        <div>
                            <label for="profile-new-password" class="block text-sm font-medium text-gray-300 mb-1">New Password</label>
                            <input type="password" id="profile-new-password" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white" placeholder="New Password">
                        </div>
                        <button type="submit" class="w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 rounded-lg">
                            Change Password
                        </button>
                    </form>

                    <button id="logout-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg mt-8">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </section>

                <section id="admin-dashboard-section" class="app-view p-4 hidden">
                    <h2 class="text-2xl font-bold text-white mb-4">Admin Dashboard</h2>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-800 p-4 rounded-lg text-center">
                            <p class="text-sm text-gray-400">Total Users</p>
                            <p id="admin-stats-users" class="text-2xl font-bold">0</p>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg text-center">
                            <p class="text-sm text-gray-400">Total Tournaments</p>
                            <p id="admin-stats-tournaments" class="text-2xl font-bold">0</p>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg text-center">
                            <p class="text-sm text-gray-400">Prize Distributed</p>
                            <p id="admin-stats-prize" class="text-2xl font-bold">₹0</p>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg text-center">
                            <p class="text-sm text-gray-400">Total Revenue</p>
                            <p id="admin-stats-revenue" class="text-2xl font-bold">₹0</p>
                        </div>
                    </div>
                    <button id="go-to-create-tournament-btn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg">
                        <i class="fas fa-plus mr-2"></i>Create New Tournament
                    </button>
                    <h3 class="text-xl font-semibold text-white mt-6 mb-3">All Tournaments</h3>
                    <div id="admin-tournaments-list" class="space-y-3">
                        </div>
                </section>

                <section id="tournament-section" class="app-view p-4 hidden">
                    <button class="text-indigo-400 mb-4" id="back-to-admin-dash-btn">&larr; Back to Dashboard</button>
                    <h2 class="text-2xl font-bold text-white mb-4">Create Tournament</h2>
                    <form id="create-tournament-form" class="bg-gray-800 p-6 rounded-lg space-y-4">
                        <input type="text" id="t-title" placeholder="Tournament Title" required class="w-full bg-gray-700 p-3 rounded-lg">
                        <input type="text" id="t-game-name" placeholder="Game Name (e.g., BGMI)" required class="w-full bg-gray-700 p-3 rounded-lg">
                        <input type="datetime-local" id="t-match-time" required class="w-full bg-gray-700 p-3 rounded-lg text-gray-400">
                        <input type="number" id="t-entry-fee" placeholder="Entry Fee (e.g., 50)" required class="w-full bg-gray-700 p-3 rounded-lg">
                        <input type="number" id="t-prize-pool" placeholder="Prize Pool (e.g., 800)" required class="w-full bg-gray-700 p-3 rounded-lg">
                        <input type="number" id="t-commission" placeholder="Commission % (e.g., 20)" required class="w-full bg-gray-700 p-3 rounded-lg">
                        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg">
                            Create Tournament
                        </button>
                    </form>
                </section>
                
                <section id="manage-tournament-section" class="app-view p-4 hidden">
                    <button class="text-indigo-400 mb-4" id="back-to-admin-dash-btn-2">&larr; Back to Dashboard</button>
                    <h2 id="manage-t-title" class="text-2xl font-bold text-white mb-4">Manage Tournament</h2>
                    
                    <form id="update-room-form" class="bg-gray-800 p-6 rounded-lg space-y-4 mb-6">
                        <h3 class="text-lg font-semibold">Update Room Details</h3>
                        <input type="text" id="manage-t-room-id" placeholder="Room ID" class="w-full bg-gray-700 p-3 rounded-lg">
                        <input type="text" id="manage-t-room-pass" placeholder="Room Password" class="w-full bg-gray-700 p-3 rounded-lg">
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg">
                            Update Room
                        </button>
                    </form>
                    
                    <form id="declare-winner-form" class="bg-gray-800 p-6 rounded-lg space-y-4">
                        <h3 class="text-lg font-semibold">Declare Winner</h3>
                        <label for="participant-winner-select" class="block text-sm font-medium text-gray-300 mb-1">Select Winner</label>
                        <select id="participant-winner-select" class="w-full bg-gray-700 p-3 rounded-lg">
                            <option value="">Loading participants...</option>
                        </select>
                        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg">
                            Declare Winner & Distribute Prize
                        </button>
                    </form>

                    <h3 class="text-xl font-semibold text-white mt-6 mb-3">Participants</h3>
                    <div id="manage-t-participants-list" class="space-y-2">
                        </div>
                </section>

            </main>

            <nav id="app-nav" class="fixed bottom-0 left-0 right-0 w-full max-w-lg mx-auto h-16 bg-gray-800 border-t border-gray-700 flex justify-around items-center z-40">
                <button data-view="home-section" class="nav-btn flex flex-col items-center justify-center text-indigo-400 w-1/4">
                    <i class="fas fa-home text-xl"></i>
                    <span class="text-xs font-medium">Home</span>
                </button>
                <button data-view="my-tournaments-section" class="nav-btn flex flex-col items-center justify-center text-gray-400 w-1/4">
                    <i class="fas fa-trophy text-xl"></i>
                    <span class="text-xs font-medium">My Fights</span>
                </button>
                <button data-view="wallet-section" class="nav-btn flex flex-col items-center justify-center text-gray-400 w-1/4">
                    <i class="fas fa-wallet text-xl"></i>
                    <span class="text-xs font-medium">Wallet</span>
                </button>
                <button data-view="profile-section" class="nav-btn flex flex-col items-center justify-center text-gray-400 w-1/4">
                    <i class="fas fa-user text-xl"></i>
                    <span class="text-xs font-medium">Profile</span>
                </button>
                <button id="admin-nav-btn" data-view="admin-dashboard-section" class="nav-btn flex-col items-center justify-center text-gray-400 w-1/4 hidden">
                    <i class="fas fa-shield-halved text-xl"></i>
                    <span class="text-xs font-medium">Admin</span>
                </button>
            </nav>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.onselectstart = function() { return false; }
        document.addEventListener('gesturestart', function (e) { e.preventDefault(); });
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            let now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
    
    <script type="module" src="js/main.js"></script>
</body>
</html>
    
